let e="Pixel Avalanche",t={},a={},o="",n=1920,r=1080,i=.5,s=!1;function l(e){return Math.floor(Math.random()*Math.floor(e))}window.setupGame=function(s,l,c){e=s,t=l,a=c,o=t.path||"",a.clouds=void 0===a.clouds||null===a.clouds?!a.overlay:"true"===a.clouds,i=void 0===a.volume||null===a.volume?0:parseInt(a.volume)/100,n=Math.min(window.innerWidth,1920),r=Math.min(window.innerHeight,1080)},window.WebFontConfig={custom:{families:["Pixeltype"]},active(){!async function(){if(document.hidden)return void document.addEventListener("visibilitychange",(()=>{location.reload()}),!1);try{const e=(await fetch(`${o}/assets/shamelist.txt`).then((e=>e.text()))).split(",").map((e=>e.trim().toLowerCase()));a.channel&&e&&e.includes(a.channel.toLowerCase())&&(console.log("This channel has been blocked for violating the PixelPlush Terms of Service."),p=!1)}catch(e){console.log(e)}"maayainsane"===a.channel.toLowerCase()&&(s=!0);Unicorn.Create("unicorn-display",{width:n,height:r,background:"transparent",init:D,update:Y,channel:a.channel,username:a.oauth?a.channel:void 0,password:a.oauth,onCommand:g,onChat:x,screenWalls:!1,gravity:{x:0,y:1}}),ComfyJS.onCheer=b,ComfyJS.onConnected=async(e,o,i)=>{if(i){!function(){if(U=t.target_width||368,$=a.rightToLeft?n-(U/2+.82*n):U/2+.82*n,S=r-47+(t.target_offset||0),Array.isArray(t.target)){T=0,L=[];for(let e=0;e<t.target.length;e++){let t=Unicorn.AddBacklay("target"+e,"target"+e,$,S,{scale:{x:2,y:2}});t.zIndex=10,t.anchor.set(.5),t.visible=!1,L.push(t)}L[T].visible=!0,a.hideTilRoll||setInterval((()=>{L[T].visible=!1,T=(T+1)%L.length,L[T].visible=!0}),60)}else L=Unicorn.AddBacklay("target","target",$,S,{scale:{x:2,y:2}}),L.zIndex=10,L.anchor.set(.5);t.target_front&&(I=Unicorn.AddOverlay("target_front","target_front",$,S,{scale:{x:2,y:2}}),I.anchor.set(.5));if(a.clouds)for(let e=0;e<11;e++){f++;let e=t.clouds[l(t.clouds.length)],o=Unicorn.AddOverlay("cloud_"+f,e,l(n),l(500),{scale:{x:3,y:3}});o.alpha=a.overlay?.5:.9,o.anchor.set(.5),o.speed=.01+.1*Math.random(),o.zIndex=o.speed,z.push(o)}a.hideTilRoll&&(z.forEach((e=>e.visible=!1)),Array.isArray(t.target)?L.forEach((e=>{e.visible=!1})):L.visible=!1,I.visible=!1);a.defaultCountdown&&parseInt(a.defaultCountdown)&&(u=!0)}();let e=await d();0!==e&&(c=e.session,setInterval((()=>{d()}),6e4))}}}()}},function(){const e=document.createElement("script");e.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var c="",p=!0;async function d(){let t=Object.keys(A).length;return fetch("https://api.pixelplush.dev/v1/analytics/heartbeat",{method:"POST",body:JSON.stringify({session:c,game:"hillroll",theme:e,channel:a.channel,players:Object.keys(A),count:t})}).then((e=>e.json()))}function h(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}}let f=0,y=!0,m=[],u=!1;async function g(e,o,n,r,i){if(document.hidden)return;if(!r.broadcaster&&!r.mod||"resethill"!==o&&"resetrace"!==o||location.reload(),!r.broadcaster&&!r.mod||"queuehill"!==o&&"queuerace"!==o||(u=!u,Object.keys(A).forEach((e=>{Unicorn.RemoveBacklay("para_"+e),Unicorn.RemoveBacklay("petpara_"+e),Unicorn.RemoveObject("player_"+e),Unicorn.RemoveObject("pet_"+e),Unicorn.RemoveText("name_"+e),Unicorn.RemoveBacklay("end_"+e),Unicorn.RemoveBacklay("petend_"+e),Unicorn.RemoveText(e+"_points"),delete A[e]})),v.x=-1e3,v.y=-1e3,_&&clearTimeout(_),u?ComfyJS.Say("/me The Hill Rolling Race is starting! Type !hill to join. Mods can use !starthill [time] to change the countdown."):ComfyJS.Say("/me The race has been cancelled.")),(r.broadcaster||r.mod)&&("starthill"===o||"startrace"===o)&&u){let e=parseInt(n.split(" "));e>0?j=1e3*e:X()}if((r.broadcaster||r.mod)&&("testhill"===o||"testrace"===o))for(var s=0;s<50;s++)f++,u?m.push({username:"test"+f,name:"test_"+f,color:i.userColor||"#ffffff",message:n,emote:"",emoji:"",extra:i}):W("test"+f,"test_"+f,i.userColor||"#ffffff",n,t.parachutes[l(t.parachutes.length)],"","",i);let c=!1;if(a.command&&o===a.command&&(c=!0),a.command||"hill"!==o&&"rolling"!==o&&"race"!==o||(c=!0),p){if(c){y&&0===j&&(j=1e3*parseInt(a.defaultCountdown)),y&&a.hideTilRoll&&(y=!1,z.forEach((e=>e.visible=!0)),Array.isArray(L)?(L[T].visible=!0,setInterval((()=>{L[T].visible=!1,T=(T+1)%L.length,L[T].visible=!0}),60)):L.visible=!0,I&&(I.visible=!0));const o=twemoji.parse(n,{assetType:"png"});!i.messageEmotes&&o.length>0?u&&!M?m.push({username:i.username,name:e,color:i.userColor||"#ffffff",message:n,emote:"",emoji:o[0].url,extra:i}):W(i.username,e,i.userColor||"#ffffff",n,t.parachutes[l(t.parachutes.length)],"",o[0].url,i):u&&!M?m.push({username:i.username,name:e,color:i.userColor||"#ffffff",message:n,emote:i.messageEmotes?Object.keys(i.messageEmotes)[0]:"",emoji:"",extra:i}):W(i.username,e,i.userColor||"#ffffff",n,t.parachutes[l(t.parachutes.length)],i.messageEmotes?Object.keys(i.messageEmotes)[0]:"","",i)}}else c&&a.oauth&&ComfyJS.Say("Hill Rolling Race is disabled in this channel for violating the Terms of Service. To re-enable the game, please contact the PixelPlush team on Discord.")}function x(e,t,a,o,n){document.hidden}function b(e,t,a,o,n){if(!document.hidden&&p)for(let e=0;e<5;e++)q(t)}let v,_=null,U=368,$=0,S=0,L=null,I=null,T=0,A={},w=[],E=null,j=0,M=!1,k=0,O="",P={},C={},z=[],R=[],B=null,F=0;function X(){j=0,Unicorn.PlaySound("sfx-parachute-drop",{volume:i}),async function(e){F++;let a=null,o=0;o=e<100?0:e<1e3?1:e<5e3?2:e<1e4?3:e<1e5?4:5;let n=3;t.dropletSizes&&(n*=t.dropletSizes[o]);n*=1.5;let r=t.droplets[o];Array.isArray(t.droplets[o])&&(r=t.droplets[o][l(t.droplets[o].length)]);a=Unicorn.AddObject("cheese_"+F,{type:"circle",sprite:r,scale:{x:1*n,y:1*n},x:l(20),y:-50-l(50),z:100,radius:1*(o/5*4+20)}),a.restitution=0,a.friction=2,a.frictionStatic=0,a.frictionAir=0,a.torque=0+l(2),a.rotationOffset=Math.random()*Math.PI,Unicorn.SetVelocity("droplet_"+F,l(24)-12,0)}(1e3),s?(m.forEach((e=>{"maayainsane"===e.username&&W(e.username,e.name,e.color,e.message,t.parachutes[l(t.parachutes.length)],e.emote,e.emoji,e.extra)})),setTimeout((()=>{M=!0,setTimeout((()=>{h(m),m.forEach((e=>{"maayainsane"!==e.username&&W(e.username,e.name,e.color,e.message,t.parachutes[l(t.parachutes.length)],e.emote,e.emoji,e.extra)})),m=[]}),1e3)}),5e3)):(M=!0,setTimeout((()=>{h(m),m.forEach((e=>{W(e.username,e.name,e.color,e.message,t.parachutes[l(t.parachutes.length)],e.emote,e.emoji,e.extra)})),m=[]}),1e3))}function J(e,t,a,o,n,r=""){F++;let i=Math.min(Math.max(1,n),100);Unicorn.AddParticles("Splash_"+F,{blendMode:PIXI.BLEND_MODES.DEFAULT,shape:"cone",angle:-Math.PI/2,spread:Math.PI/2,startColor:e,endColor:t,intensity:i,minSpeed:.05,maxSpeed:.25,gravityX:0,gravityY:3.5,fadeOut:!0,decay:1,image:r||void 0},a,o),function(e,t=2e3){setTimeout((()=>{Unicorn.RemoveParticles(e)}),t)}("Splash_"+F,150)}function N(e,a,o,n=""){const r=t.target_boosh_scale||2;t.target_boosh.forEach(((t,o)=>{for(let t=0;t<l(5);t++){F++;let o=Unicorn.AddBacklay("boosh_"+F,"target_boosh"+t,e,a+10,{scale:{x:r,y:r}});o.zIndex=11,o.vX=l(50)-25,o.vY=-350+l(100),o.anchor.set(.5),R.push(o)}}))}async function W(e,r,i="#ffffff",s,c,p="",d="",h){const f=4/60;if(!A[e]){A[e]={};let u=null,g=null,x=null,b=tinycolor(i),v={};try{let t=await fetch(`https://api.pixelplush.dev/v1/accounts/twitch/design?username=${e}`).then((e=>e.json()));t&&(v=t.style||{})}catch(e){console.log(e)}if(v.pet&&v.pet.id&&"pet_none"!==v.pet.id&&(t.pets||(t.pets={}),g=v.pet.id.replace("pet_",""),!t.pets[g])){t.pets[g]={path:v.pet.path,minIdle:v.pet.minIdle,maxIdle:v.pet.maxIdle};for(let e=0;e<10;e++){let t=v.pet.path+"_front";Unicorn.Load(t+e,`${o}/assets/pets/${g}/${t}/${t}${e+1}.png`)}}if(p){if(!P[p]){P[p]=!0;var y=`https://static-cdn.jtvnw.net/emoticons/v1/${p}/2.0`;return Unicorn.Load(`emote_${p}`,y),void setTimeout((()=>{delete A[e],W(e,r,i,s,c,p,d,h)}),500)}u=Unicorn.AddObject("player_"+e,{type:"circle",scale:{x:1,y:1},animations:{front:{framerate:f,frames:[`emote_${p}`],loop:!0}},x:a.rightToLeft?n-l(20):l(20),y:-50-l(50),z:100,radius:24}),u.endImage=`emote_${p}`,u.endScale=1}else if(d){if(!C[d])return C[d]=!0,Unicorn.Load(`emoji_${d}`,d),void setTimeout((()=>{delete A[e],W(e,r,i,s,c,p,d,h)}),500);u=Unicorn.AddObject("player_"+e,{type:"circle",scale:{x:.6,y:.6},animations:{front:{framerate:f,frames:[`emoji_${d}`],loop:!0}},x:a.rightToLeft?n-l(20):l(20),y:-50-l(50),z:100,radius:24}),u.endImage=`emoji_${d}`,u.endScale=.6}else{if(!t.characters[s])if(v.character&&v.character.id){if(!t.characters[v.character.id]){t.characters[v.character.id]=v.character.path;for(let e=0;e<10;e++){let a=t.characters[v.character.id];Unicorn.Load(`${v.character.id}_${e}`,`${o}/assets/characters/${v.character.id}/${a}_front/${a}_front${e+1}.png`)}}s=v.character.id}else s=t.playable[Math.floor(t.playable.length*Math.random())];if(u=Unicorn.AddObject("player_"+e,{type:"circle",scale:{x:2,y:2},animations:{front:{framerate:f,frames:[...Array(10).keys()].map((e=>`${s}_${e}`)),loop:!0}},x:a.rightToLeft?n-l(20):l(20),y:-50-l(50),z:100,radius:24}),u.endImage=`${s}_0`,u.endScale=2,"boybear"===s||"girlbear"===s){var m=PIXI.utils.string2hex(b.brighten(50).toHexString());u.animations.front.tint=m}}if(g){let a={front:[]};for(let e=0;e<10;e++)Object.keys(a).forEach((o=>{a[o].push(t.pets[g].path+"_"+o+e)}));x=Unicorn.AddObject("pet_"+e,{type:"circle",scale:{x:2,y:2},animations:{front:{framerate:f,frames:a.front,loop:!0}},x:-1e3,y:-1e3,z:200,radius:16,isStatic:!0}),x.isSensor=!0}let U=Unicorn.AddBacklay("para_"+e,c,{scale:{x:3,y:3},x:50,y:0,z:50});U.scale.x=0,U.scale.y=0,U.anchor.set(.5,.9);let $=Unicorn.AddText("name_"+e,r,-1e3,-1e3,{fontFamily:"Pixeltype",fontSize:34,fontWeight:400,fill:i,lineJoin:"round",stroke:tinycolor.isReadable(b.toString(),"#000000")?"#000000":"#ffffff",strokeThickness:6});$.anchor.set(.5);let S=Unicorn.AddText(e+"_points","",-1e3,-1e3,{fontFamily:"Pixeltype",fontSize:34,fontWeight:400,fill:"#ffd700",lineJoin:"round",stroke:"#000000",strokeThickness:6});S.anchor.set(.5);let L=null;g&&(L=Unicorn.AddBacklay("petpara_"+e,c,{scale:{x:1,y:1},x:50,y:0,z:150}),L.scale.x=0,L.scale.y=0,L.anchor.set(.5,.5)),u.restitution=1,u.frictionStatic=0,u.frictionAir=0,u.torque=0+l(3),u.rotationOffset=Math.random()*Math.PI,A[e]={parachute:U,player:u,pet:x,petPara:L,petType:g,petOffset:10*Math.random(),label:$,scoreLabel:S},h&&(A[e].userId=h.userId,A[e].name=h.displayName||h.username),_&&clearTimeout(_),_=setTimeout((()=>{location.reload()}),parseInt(a.cooldown||"90000"))}}async function q(e){if(!a.droplets)return;F++;let o=null,r=0;r=e<100?0:e<1e3?1:e<5e3?2:e<1e4?3:e<1e5?4:5;let i=3;t.dropletSizes&&(i*=t.dropletSizes[r]);let s=t.droplets[r];Array.isArray(t.droplets[r])&&(s=t.droplets[r][l(t.droplets[r].length)]),o=Unicorn.AddObject("droplet_"+F,{type:"circle",sprite:s,scale:{x:1*i,y:1*i},x:l(n),y:-100-l(50),z:100,radius:1*(r/5*4+20)}),o.restitution=1,o.friction=.5*(5-r),o.frictionStatic=0,o.frictionAir=0,o.torque=-1+l(2),o.rotationOffset=Math.random()*Math.PI,Unicorn.SetVelocity("droplet_"+F,l(24)-12,0),setTimeout((()=>{Unicorn.RemoveObject(o.label)}),3e4)}function D(){if(PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,Unicorn.Load("map",`${o}/assets/${t.bg}.png`),!a.overlay){var e=Unicorn.AddBacklay("map","map",0,r-1080);e.scale.x=3,e.scale.y=3}if(Array.isArray(t.target)){t.target.map(((e,t)=>Unicorn.Load("target"+t,`${o}/assets/${e}.png`)))}else{Unicorn.Load("target",`${o}/assets/${t.target}.png`)}t.target_front&&Unicorn.Load("target_front",`${o}/assets/${t.target_front}.png`),t.target_boosh&&t.target_boosh.forEach(((e,t)=>{Unicorn.Load("target_boosh"+t,`${o}/assets/${e}.png`)})),Unicorn.Load("star",`${o}/assets/icons/star.png`),v=Unicorn.AddOverlay("star","star",-1e3,-1e3,{scale:{x:3,y:3}}),v.anchor.set(.5),t.parachutes.forEach((e=>Unicorn.Load(e,`${o}/assets/${e}.png`))),Object.keys(t.characters).forEach((e=>{for(let a=0;a<10;a++){let n=t.characters[e];Unicorn.Load(`${e}_${a}`,`${o}/assets/characters/${e}/${n}_front/${n}_front${a+1}.png`)}})),t.clouds.forEach((e=>Unicorn.Load(e,`${o}/assets/${e}.png`))),t.droplets.forEach((e=>{Array.isArray(e)?e.forEach((e=>Unicorn.Load(e,`${o}/assets/${e}.png`))):Unicorn.Load(e,`${o}/assets/${e}.png`)})),t.target_sound&&Unicorn.Load("sfx-target-drop",`${o}/assets/${t.target_sound}`),Unicorn.Load("sfx-parachute-drop",`${o}/assets/${t.drop_sound}`),Unicorn.Load("sfx-parachute-flap",`${o}/assets/${t.parachute_sound}`);const i=t.segments;i.forEach(((e,t)=>{Unicorn.Load(`ground_segment_${t}`,`https://www.pixelplush.dev/assets/${e}.png`)})),Unicorn.AddObject("WallLeft",{type:"rectangle",x:-200,y:0,width:400,height:2*r,isStatic:!0}).sprite.visible=!1,Unicorn.AddObject("WallRight",{type:"rectangle",x:n+200,y:0,width:400,height:2*r,isStatic:!0}).sprite.visible=!1,Unicorn.AddObject("WallBottom",{type:"rectangle",x:.5*n,y:r+100,width:n,height:200,isStatic:!0}).sprite.visible=!1;const s=1.1*r/n;let c=0,p=0,d=[{x:a.rightToLeft?n:0,y:100}],h=0;for(let e=30;e<n;e+=30){h++;let t=e*s-Math.min(100,5*h)+l(50),o=Math.atan2(t-p,30),r=Math.sqrt((t-p)**2+900);d.push({x:a.rightToLeft?n-e:e,y:100+t}),Unicorn.AddObject("Ground_"+e,{type:"rectangle",x:a.rightToLeft?n-(.5*(e-c)+c):.5*(e-c)+c,y:120+.5*(t-p)+p,width:r,height:40,angle:a.rightToLeft?-o:o,isStatic:!0,color:3355443}).sprite.visible=!1;let f=Unicorn.AddOverlay("ground_segment_"+e,`ground_segment_${l(i.length)}`,a.rightToLeft?n-(.5*(e-c)+c):.5*(e-c)+c,100+.5*(t-p)+p,{scale:{x:a.rightToLeft?-r/20:r/20,y:r/20}});f.rotation=a.rightToLeft?-o:o,f.anchor.set(.5,1),f.filters=[new PIXI.filters.NoiseFilter(.1)],c=e,p=t}d.push({x:a.rightToLeft?n:0,y:r+100}),d.reverse();var f=new PIXI.Graphics;f.beginFill(16777215),f.drawPolygon(d.map((e=>new PIXI.Point(e.x,e.y)))),f.endFill(),f.filters=[new PIXI.filters.NoiseFilter(.1)],groupOverlay.addChild(f),Matter.Events.on(physics,"beforeUpdate",(function(e){})),Matter.Events.on(physics,"afterUpdate",(function(e){for(var t in A)A[t].pet&&(A[t].pet.angle=A[t].player.angle,A[t].pet.position.x=Math.max(10,Math.min(n-10,A[t].player.position.x+A[t].petOffset)),A[t].pet.position.y=A[t].player.position.y+10)})),E=Unicorn.AddText("countdown_text","!hill to roll",n/2,.025*r,{fontFamily:"Pixeltype",fontSize:80,fontWeight:"bold",fill:0,lineJoin:"round",stroke:"#ffffff",strokeThickness:6}),E.style.align="center",E.anchor.set(.5,0),(a.hideInstructions||a.hideTime)&&(E.text="")}function Y(e,o){for(var s in M&&w.length<Object.keys(A).length&&(k+=o,a.hideTime||(E.text=(k/1e3).toFixed(3)+"s")),j>0&&(j-=o,a.hideTime?E.text="":a.hideInstructions?E.text=`Starting in ${Math.round(j/1e3)}s`:E.text=`!hill to join\n${Math.round(j/1e3)}s`,j<=0&&(a.hideTime||(E.text="0.000s"),X())),A)if(A[s].player)if(A[s].isLanded){if(u){let e=s===O?1:.3;A[s].end.alpha=e,A[s].label.alpha=Math.round(e),A[s].pet&&(A[s].petEnd.alpha=e)}A[s].scoreLabel.tint=A[s].label.tint=s===O?16777215:3355443,s===O?(A[s].end.zIndex=A[s].scoreLabel.zIndex=A[s].label.zIndex=9e3,A[s].pet&&(A[s].pet.zIndex=9001),A[s].label.position.x=A[s].player.position.x,A[s].label.position.y=A[s].player.position.y-80,A[s].scoreLabel.position.x=A[s].label.position.x+15,A[s].scoreLabel.position.y=A[s].label.position.y-30,A[s].label.style.fontSize=40,A[s].scoreLabel.style.fontSize=40,v.x=A[s].scoreLabel.x-A[s].scoreLabel.width/2-15,v.y=A[s].scoreLabel.y-5):(A[s].label.position.x=A[s].player.position.x,A[s].label.position.y=A[s].player.position.y-60,A[s].scoreLabel.position.y=A[s].label.position.y-30,A[s].scoreLabel.alpha=0,A[s].label.style.fontSize=34,A[s].scoreLabel.style.fontSize=34)}else{if(A[s].pet&&(A[s].pet.position.x=Math.max(20,Math.min(n-20,A[s].player.position.x+A[s].petOffset)),A[s].pet.position.y=A[s].player.position.y+20,A[s].petPara.position.x=A[s].pet.position.x,A[s].petPara.position.y=A[s].pet.position.y-30),A[s].player.position.y>r-46-50+(t.target_y_offset||0)){A[s].isLanded=!0,A[s].parachute.scale.x=A[s].parachute.scale.y=0,A[s].pet&&(A[s].petPara.scale.x=A[s].petPara.scale.y=0);let e=Unicorn.AddBacklay("end_"+s,A[s].player.endImage,A[s].player.position.x,A[s].player.position.y,{scale:{x:A[s].player.endScale,y:A[s].player.endScale}});if(A[s].player.animations&&(e.tint=A[s].player.animations.front.tint),e.anchor.set(.5),e.zIndex=20,A[s].player.isStatic=!0,u&&(w.push(s),A[s].score=k,A[s].rank=w.length),u?e.alpha=A[s].score>0?1:.3:(B&&(B.end.alpha=.3,B.petEnd&&(B.petEnd.alpha=.3)),e.alpha=1,B=A[s]),A[s].end=e,A[s].pet){let e=Unicorn.AddBacklay("petend_"+s,`${A[s].petType}_front0`,A[s].pet.position.x,A[s].pet.position.y,{scale:{x:2,y:2}});A[s].pet.animations&&(e.tint=A[s].pet.animations.front.tint),e.anchor.set(.5),e.zIndex=30,A[s].pet.isStatic=!0,u&&(e.alpha=A[s].score>0?1:.3),A[s].petEnd=e}if(t.target_particles&&J(t.target_particles[0],t.target_particles[1],A[s].player.position.x,A[s].player.position.y+40,10),t.target_boosh&&N(A[s].player.position.x,A[s].player.position.y+40),t.target_sound&&Unicorn.PlaySound("sfx-target-drop",{volume:i}),console.log((k/1e3).toFixed(3)+"s",s,"finished",A[s].rank),u&&1===A[s].rank&&(A[s].scoreLabel.x=A[s].label.position.x,A[s].scoreLabel.y=A[s].label.position.y-30,A[s].scoreLabel.text=(k/1e3).toFixed(3)+"s",O=s),u&&A[s].rank<=(a.winnerCount?parseInt(a.winnerCount):10)&&a.messageFormat){let e=a.messageFormat.replace("USERNAME",A[s].name).replace("RANK",A[s].rank).replace("TIME",(k/1e3).toFixed(3)+"s");setTimeout((()=>{ComfyJS.Say(e)}),5e3)}A[s].label.alpha=1===A[s].rank?1:.3,Unicorn.RemoveObject(A[s].player.label),Unicorn.RemoveBacklay("para_"+s),A[s].pet&&(Unicorn.RemoveObject(A[s].pet.label),Unicorn.RemoveBacklay("petpara_"+s))}else A[s].player.position.y<.5*-r||(A[s].parachute.scale.x=A[s].parachute.scale.y=0,A[s].pet&&(A[s].petPara.scale.x=A[s].petPara.scale.y=0));A[s].label.position.x=A[s].player.position.x,A[s].label.position.y=A[s].player.position.y-60}z.forEach(((e,t)=>{e.x-=o*e.speed,e.x+e.width/2<=0&&(e.x=n+e.width/2,e.y=l(500),e.speed=.01+.1*Math.random(),e.zIndex=e.speed)})),R.forEach((e=>{(e.vY<0||e.y<r-20)&&(e.x+=o/1e3*e.vX,e.y+=o/1e3*e.vY,e.vY<20&&(e.vY+=o/1e3*200))}))}